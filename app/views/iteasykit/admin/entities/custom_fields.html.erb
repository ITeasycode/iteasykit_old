<% content_for :entity_title do %>Fields in custom <%= @entity.machine_name %> entity
<% end %>
<% content_for :pull_right do %>
  <%= link_to '<i class="zmdi zmdi-long-arrow-return zmdi-hc-fw"></i>'.html_safe, admin_entity_url(@entity) %>
<% end %>

<ul class="nav nav-tabs text-right">
  <li>
    <a href="<%= edit_admin_entity_path(@entity) %>">Editing <%= @entity.id %></a>
  </li>
  <li class="active">
    <a href="<%= admin_entity_custom_fields_path(@entity) %>" >Custom field <%= @entity.machine_name %></a>
  </li>
  <li>
    <a href="<%= new_admin_entity_path %>?entity_type=<%= @entity_type.id %>">New <%= @entity_type.name %></a>
  </li>

  <li>
    <a href="<%= admin_entity_type_url(@entity_type) %>" title="List <%= @entity_type.name %>"><i class="zmdi zmdi-playlist-plus"></i></a>
  </li>
  <li class="">
    <a href="<%= edit_admin_entity_type_url(@entity_type) %>" title="Edit entity type <%= @entity_type.name %>"><i class="zmdi zmdi-settings"></i></a>
  </li>
  <li>
    <a href="<%= admin_entity_type_fields_url(@entity_type) %>" title="Field entity type <%= @entity_type.name %>"><i class="zmdi zmdi-border-color"></i></a>
  </li>

</ul>

<div class="row">
  <div class="col-md-12">
    <div class="col-md-8">
      <div class="content-box">
        <div class="head head-border warning-color">
          <h5 class="content-title warning-color">List field
            <a class="fullscreen-btn" href="#"><i class="zmdi zmdi-fullscreen"></i></a></h5>


        </div>

        <div class="content">
          <table class="table table-bordered table-hover table-striped">
            <thead>
            <tr>
              <th>Drop</th>
              <th>Id</th>
              <th>Name</th>
              <th>Type</th>
              <th>Machine name</th>
              <th>Help</th>

              <th>Active</th>
              <th>Is required</th>
              <th>Is multi</th>
              <th>Is filter</th>

              <th>Action</th>
            </tr>
            </thead>
            <tbody class="sortable">  <!-- sortable target -->
            <% @fcis.each_with_sortable_id do |item, sortable_id| %>
              <tr id="<%= sortable_id %>">  <!-- Needs id tag on sorting elements -->
                <td><i class="zmdi zmdi-arrows zmdi-hc-fw"></i></td>
                <td><%= item.id %></td>
                <td><%= item.name %></td>
                <td><%= item.type_fci %></td>
                <td><%= item.machine_name %></td>
                <td><%= item.help %></td>
                <td><i class="zmdi zmdi-<%= item.active ? 'check' : 'close' %>"></i></td>
                <td><i class="zmdi zmdi-<%= item.is_required ? 'check' : 'close' %>"></i></td>
                <td><i class="zmdi zmdi-<%= item.is_multi ? 'check' : 'close' %>"></i></td>
                <td><i class="zmdi zmdi-<%= item.is_filter ? 'check' : 'close' %>"></i></td>

                <td class="text-center">
                  <%= link_to '<i class="zmdi zmdi-edit"></i>'.html_safe, '#' , class: "btn btn-success raised icon waves-effect" %>
                  <%= link_to '<i class="zmdi zmdi-delete"></i>'.html_safe, [:admin, item], class: "btn btn-danger raised icon waves-effect", method: :delete,
                              data: {confirm: 'Are you sure?'} %></td>
              </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="content-box">
        <div class="head head-border warning-color">
          <h5 class="content-title warning-color">Add new field</h5>
        </div>

        <div class="content">
          <div class="row">
            <%= form_with(model: [:admin, @fci], local: true, class: 'form-horizontal') do |form| %>
              <% if @fci.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(fci.errors.count, "error") %> prohibited this fci from being saved:</h2>

                  <ul>
                    <% @fci.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                    <% end %>
                  </ul>
                </div>
              <% end %>


              <div class="form-group">
                <label class="col-sm-4 control-label">Name</label>
                <div class="col-sm-8">
                  <%= form.text_field :name, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-4 control-label">Type</label>
                <div class="col-sm-8">
                  <%= form.select(:type_fci, [['String', 'string'], ['Full Text', 'full_text'], ['Text', 'text'],
                                              ['List String', 'list_string'], ['Integer', 'integer'], ['Boolean', 'boolean'], ['Image', 'image']],
                                  {include_blank: false}, class: "form-control input-sm input-warning") %>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label">Help</label>
                <div class="col-sm-8">
                  <%= form.text_area :help, class: "form-control" %>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label">Placheholder</label>
                <div class="col-sm-8">
                  <%= form.text_field :placeholder, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-4 control-label">Value</label>
                <div class="col-sm-8">
                  <%= form.text_field :value, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-4 control-label">Prefix</label>
                <div class="col-sm-8">
                  <%= form.text_field :prefix, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-4 control-label">Suffix</label>
                <div class="col-sm-8">
                  <%= form.text_field :suffix, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-4 control-label">Element html</label>
                <div class="col-sm-8">
                  <%= form.text_field :elementcls, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-4 control-label">Id </label>
                <div class="col-sm-8">
                  <%= form.text_field :idcls, class: "form-control input-sm" %>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label">Class </label>
                <div class="col-sm-8">
                  <%= form.text_field :classcls, class: "form-control input-sm" %>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label">Machine name </label>
                <div class="col-sm-8">
                  <%= form.text_field :machine_name, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-4 control-label">Position </label>
                <div class="col-sm-8">
                  <%= form.number_field :position, class: "form-control input-sm" %>
                </div>
              </div>
              <div class="col-md-12">
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="control-label text-color">
                      Active:
                      <%= form.check_box :active, class: "toggle toggle-success" %>
                      <i></i>
                    </label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="control-label text-color">
                      Is required:
                      <%= form.check_box :is_required, class: "toggle toggle-success" %>
                      <i></i>
                    </label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="control-label text-color">
                      Is filter:
                      <%= form.check_box :is_filter, class: "toggle toggle-success" %>
                      <i></i>
                    </label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="control-label text-color">
                      Is multi:
                      <%= form.check_box :is_multi, class: "toggle toggle-success" %>
                      <i></i>
                    </label>
                  </div>
                </div>


                <div class="col-md-4">
                  <div class="form-group">
                    <%= form.hidden_field :fciable_type, value: 'Iteasykit::Entity' %>



                    <%= form.hidden_field :fciable_id, value: @entity.id %>


                    <%= form.submit 'Save', class: "btn-success btn-lg" %>

                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>